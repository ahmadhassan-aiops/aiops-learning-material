Lecture 34 : Docker Secrets

What is secret ?
its just like very important assets taht will be breach we will be in trouble. Like example password, ssl key, certs, client token , payments toke, pin code ,cvv. its very important to storing the secrets.


What is docker secret?
A secret is blob of data that should not be transmitted over network or stored unencryption a Dockerfile or in your application source code.
Example : Username and password


.env file create
username : Abdeali
password : abdeali123

Docker secret command will work with only Docker swarm.

you need 2 machine in your labs
1. Master
2. Node


Create docker swarm before docker secret practical: please refer 31st lecture

Docker Secret :-

echo "This is secret" | docker secret  create my_secret_data -


root@abdealidodia:~# docker secret ls
ID                          NAME             DRIVER    CREATED              UPDATED
tgwbyycv2c1iqozqkyke86kjh   my_secret_data             About a minute ago   About a minute ago
root@abdealidodia:~#


# docker service create --name="redis" --secret="my_secret_data" redis:alpine

By default password : /run/secret/<Secretname>  (within docker engine ofcourse and not your host machine)

The unecryption secret is mounted into container in in-memory filesystem : /run/secret

# docker service help
## docker service ls
# docker service ps dfmgumsl5g29

# docker exec -it b2ed500654dd sh

docker ps --filter name=redis -q

# docker exec $(docker ps --filter name=redis -q) cat /run/secrets/my_secret_data


Master :-
# docker service update --secret-rm="my_secret_data" redis


version: '3.1'
services:
db:
env:
MYSQL_ROOT_PASSWORD: abdeali1234  
MYSQL_ROOT_PASSWORD_FILE: /run/secrets/my_secret_data

URL :http://www.jadejaber.com/articles/hello-docker-with-swarm-mono-node/


# docker stack deploy -c docker-compose.yml  Myapp
docker service ls
docker stack ls
docker stack ps Myapp



#JBOSS insallation
Useradd